<html>
    <head>
        <title>Page Title</title>
        <link rel="stylesheet" href="../app/start/web/startup.css" type="text/css" />
        <script src="/cordys/thirdparty/jquery/jquery.debug.js" type="text/javascript"></script>
        <script src="../app/start/web/bundles/coreBundleAwpClient-9e875f5dfe.js" type="text/javascript"></script>
        <script src="../app/start/web/bundles/extrasBundleAwpClient-3f10ad1cd4.js" type="text/javascript"></script>
        <script src="../app/start/web/thirdpartylibs/csrf.js" type="text/javascript"></script>
        <script src="../app/start/web/jspm_packages/system.js" type="text/javascript"></script>
        <script src="../app/start/web/config.js" type="text/javascript"></script>
        <script src="../app/start/web/worker/wsctf-worker.js" type="text/javascript"></script>
        <script type="text/javascript">
			$(document).ready(function() {
				$("#btnClickMe").click(function() {
					console.log('Hello world...');
					let intervalID = window.setInterval(() => {
						let appworksFrame = document.getElementById('appworks_frame').contentWindow;
						if (appworksFrame) {
							if (appworksFrame.publicAPIProvider && appworksFrame.publicAPIProvider.updateData) {
								let result = appworksFrame.publicAPIProvider.updateData('080027e84f06a1ec8deeaa8dab74a43a.1', 'prs_id', 'updated externally!');
								console.log(result);
								let result2 = appworksFrame.publicAPIProvider.saveAllItems();
								console.log(result2);
								clearInterval(intervalID);
								console.log('I found the API, Now clear the timer');
							}
						} else {
							console.log('Hook not found, let this timer run again');
						}
					}, 200);
				});
			});
        </script>
    </head>
    <body>
        <h1>New API demo external</h1>
		<input id="btnClickMe" type="submit" value="Click me"/>
		<iframe id='appworks_frame' src="/home/appworks_tips/app/start/web/item/080027e84f06a1ec8deeaa8dab74a43a.1" style="display:none; tabindex:-1; width:100%; height:100%;"></iframe>
        <!-- <iframe id='appworks_frame' src="/home/appworks_tips/app/start/web/item/080027e84f06a1ec8deeaa8dab74a43a.1" style="width:100%; height:100%;"></iframe> -->
    </body>
</html>